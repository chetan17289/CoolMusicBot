"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/*
 * Copyright 2018 - 2019 Ayana Developers <devs@ayana.io>
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const os = require("os");
const constants_1 = require("../constants");
const Transport_1 = require("./Transport");
class ConsoleTransport extends Transport_1.Transport {
    constructor(options = {}) {
        options = Object.assign({ eol: os.EOL, stderrMinLevel: constants_1.LogLevel.WARN }, options);
        super(options);
    }
    print(meta, message) {
        if (constants_1.LogLevelValue[meta.level] > constants_1.LogLevelValue[this.options.stderrMinLevel]) {
            if (console._stdout) {
                process.stdout.write(`${message}${this.options.eol}`);
            }
            else {
                // console.log adds a newline
                console.log(message);
            }
        }
        else if (console._stderr) {
            process.stderr.write(`${message}${this.options.eol}`);
        }
        else {
            // console.error adds a newline
            console.error(message);
        }
    }
}
exports.ConsoleTransport = ConsoleTransport;
//# sourceMappingURL=ConsoleTransport.js.map